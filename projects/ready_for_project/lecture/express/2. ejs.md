---
marp: true
html: true
size: 4:3
paginate: true
style: |
  h2 {
    /* text-shadow: 1px 1px 0px #000000;*/
    color: #333;
    background-color: #e1bee7;  /* Yellow background to highlight */
    padding: 0.2em 0.4em;       /* Optional padding for better appearance */
    border-radius: 0.2em;       /* Optional rounded corners */
  }
  h3 {
    text-shadow: 1px 1px 0px #000000;
    color: #333;
  }  
  strong {
    text-shadow: 1px 1px 0px #000000;
  }
  @media print {
    strong {
      text-shadow: none !important;
      -webkit-text-stroke: 0.6px rgba(0,0,0,0.35);
      text-stroke: 0.6px rgba(0,0,0,0.35); /* ignored by many, harmless */
    }
  }
  img[alt~="center"] {
    display: block;
    margin: 0 auto;
  }
    img[alt~="outline"] {
    border: 2px solid #388bee;
  }
  .columns {
    display: flex;
    gap: 2rem;
  }
  .column {
    flex: 1;
  }
---

<!-- _class: lead -->
<!-- _class: frontpage -->
<!-- _paginate: skip -->

# EJS (Embedded JavaScript Templates)

HTML + small pieces of JavaScript to display dynamic data

---

EJS (Embedded JavaScript Templates) is a server-side templating engine for Express that lets you generate HTML using JavaScript.

---

## Why EJS?

Express does not render HTML by itself.

EJS provides:

- HTML templates
- Variables
- Loops & conditionals
- Partials (reusable layouts)

Similar to:

- Blade (PHP/Laravel)
- Jinja (Python/Flask)

---

## Express + EJS Flow

```txt
Browser → Express Route → EJS Template → Final HTML
```

Example:

```js
app.get('/hello', (req, res) => {
  res.render('hello', { name: 'Sam' });
});
```

Express renders `views/hello.ejs`, and replaces name with 'Sam'.

---

### EJS Example Template

We can use JavaScript expressions in the EJS Template in `<%= ... = >`.

`hello.ejs`:

```html
<h1>Hello <%= name %>!</h1>
```

Renders:

```html
<h1>Hello Sam!</h1>
```

---

### Insert variable

```html
<p><%= user.email %></p>
```

### Loop

```html
<% posts.forEach(p => { %>
  <li><%= p.title %></li>
<% }) %>
```

### If

```html
<% if(isAdmin){ %>
  <button>Admin</button>
<% } %>
```

---

### Enabling EJS in Express

```js
app.set('view engine', 'ejs');
```

Express automatically uses `views/` as the folder.

---

### Example: index_ejs.js

```js
app.get('/list', function(req, resp){
  runListGet(req, resp);
});

async function runListGet(req, resp) {
    try {
      const posts = db.collection(POSTS);
      const res = await posts.find().toArray();
      const query = { posts: res };
      resp.render('list.ejs', query)
    } catch (e) {
      console.error(e);
    } 
}
```
