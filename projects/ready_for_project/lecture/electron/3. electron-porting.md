---
marp: true
html: true
size: 4:3
paginate: true
style: |
  h2 {
    /* text-shadow: 1px 1px 0px #000000;*/
    color: #333;
    background-color: #e1bee7;  /* Yellow background to highlight */
    padding: 0.2em 0.4em;       /* Optional padding for better appearance */
    border-radius: 0.2em;       /* Optional rounded corners */
  }
  h3 {
    text-shadow: 1px 1px 0px #000000;
    color: #333;
  }  
  strong {
    text-shadow: 1px 1px 0px #000000;
  }
  @media print {
    strong {
      text-shadow: none !important;
      -webkit-text-stroke: 0.6px rgba(0,0,0,0.35);
      text-stroke: 0.6px rgba(0,0,0,0.35); /* ignored by many, harmless */
    }
  }
  img[alt~="center"] {
    display: block;
    margin: 0 auto;
  }
    img[alt~="outline"] {
    border: 2px solid #388bee;
  }
  .columns {
    display: flex;
    gap: 2rem;
  }
  .column {
    flex: 1;
  }
---

<!-- _class: lead -->
<!-- _class: frontpage -->
<!-- _paginate: skip -->

# Porting React to Electron

Best of Both Worlds

`electron/electron_porting_without_preload`
`electron/electron_porting`

---

## Why React + Electron?

- React's component system
- Modern development experience
- Desktop app capabilities
- File system access
- Native menus & notifications

---

### Conversion Steps

1. **Keep React app as-is**
2. **Add Electron wrapper**
3. **Point Electron to React**
4. **Add desktop features**

---

## Electron Porting (Without Preload) Example

### New Project Structure

```txt
electron_porting_without_preload/
├── index.html
├── main.js
├── package.json
├── src
│   ├── App.css
│   ├── App.jsx
│   └── main.jsx
└── vite.config.js
```

---

### 1. Updated package.json

```json
{
  "name": "my-electron-react-app",
  "main": "main.js",
  "homepage": "./",
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "electron": "^28.0.0",
    "concurrently": "^8.0.0"
  },
  "scripts": {
    "start": "concurrently \"npm run react\" \"npm run electron\"",
    "react": "react-scripts start",
    "electron": "wait-on http://localhost:3000 && electron .",
    "build": "react-scripts build",
    "dist": "npm run build && electron-builder"
  }
}
```

---

### 2. main.js (Electron)

With `npm start`, the `dist` directory contains all the JavaScript files including the index.html.

```javascript
const { app, BrowserWindow } = require('electron')
const path = require('path')

function createWindow() {
  const win = new BrowserWindow({
    width: 400,
    height: 600,
    webPreferences: {
      nodeIntegration: false,
      contextIsolation: true
    }
  })

  // Load the built React app from dist folder
  win.loadFile(path.join(__dirname, 'dist', 'index.html'))
}
```

---

#### The dist directory

```txt
dist
├── assets
│   ├── index-afa94370.css
│   └── index-eaaccfef.js
└── index.html
```

All the React library code and App business/UI logic is compiled in one JavaScript file (index-eaaccfef.js in this example)

```html
<head>
  <meta charset="UTF-8">
  <script type="module" crossorigin src="./assets/index-eaaccfef.js"></script>
  <link rel="stylesheet" href="./assets/index-afa94370.css">
</head>
```

---

#### Electron Window Lifecycle management.

```js
app.whenReady().then(() => {
  createWindow()
  app.on('activate', () => {
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow()
    }
  })
})

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') {
    app.quit()
  }
})
```

---

### 3. App.jsx

We can use the same App.jsx.

```js
import { useState } from 'react'

function App() {
  const [num1, setNum1] = useState('')
  const [num2, setNum2] = useState('')
  const [operation, setOperation] = useState('+')
  const [result, setResult] = useState(null)

  const calculate = () => {
    const n1 = parseFloat(num1)
    const n2 = parseFloat(num2)
    
    if (isNaN(n1) || isNaN(n2)) {
      setResult('Invalid input')
      return
    }
```

---

### Development Workflow

```bash
# Install all dependencies
npm install

# Start both React and Electron
npm start

# React runs on http://localhost:3000
# Electron loads React from localhost
```

---

#### Production Build

```bash
# 1. Build React app
npm run build

# 2. Package with Electron
npm run dist

# Output:
# dist/
#   ├── MyApp.exe (Windows)
#   ├── MyApp.app (macOS)
#   └── MyApp.AppImage (Linux)
```
